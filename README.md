# Методы обнаружения коллизий двух выпуклых полигонов

---

## Задание:

* Проверить разными методами, пересекаются ли два произвольных выпуклых полигона;
* Визуализировать их с помощью ```matplotlib```;
* Измерить время работы алгоритмов без ```print``` и отрисовки.

---

## Решение 1:

*Отрезки AB и CD пересекаются тогда и только
тогда, когда точки A и B разделены отрезком CD, а точки C и D разделены отрезком AB.*

* Если точки A и B разделены отрезком
  CD, то ACD и BCD должны иметь противоположную ориентацию, что
  означает, что либо ACD, либо BCD направлены против часовой
  стрелки, но не оба сразу.

````   
def __intersect__(self, a, b, c, d):
    def ccw(e, f, g):
        return (g.y - e.y) * (f.x - e.x) > (f.y - e.y) * (g.x - e.x)
    return ccw(a, c, d) != ccw(b, c, d) and ccw(a, b, c) != ccw(a, b, d)
````

### Код решения:
[linearSolution.py](https://github.com/Dziodzi/polygon-collision-checking/blob/main/linearSolution.py)

### Результат работы:
![image](https://github.com/Dziodzi/polygon-collision-checking/assets/79766495/8cfa8da8-344a-4504-a87e-7a8964889757)

---
 
## Решение 2:

*Алгоритм Гилберта-Джонсона-Кёрти (GJK) — это алгоритм, определяющий пересечение двух выпуклых полигонов. Он реализуется при помощи разности Минковского и оптимизируется при помощи обобщённой вспомогательной функции и симплексов.*

* Предположим, у нас есть два полигона:
![image](https://github.com/Dziodzi/polygon-collision-checking/assets/79766495/4010d744-098e-40e8-81bd-284c34ba4d05)
* В таком случае, **разность Минковского** для них:
![image](https://github.com/Dziodzi/polygon-collision-checking/assets/79766495/a4b1a921-4547-4ec8-a86e-ebb13633a6c9)
* Чтобы не строить полную разность Минковского, воспользуемся **вспомогательной функцией**. Она представляет собой способ сэмплирования точки на ребре разности Минковского без построения всей фигуры. Вспомогательная функция получает фигуру и направление, которое нужно проверить, а затем получает наиболее удалённую точку.
* На основе вспомогательных точек формируется **симплекс** - выборка точек вдоль фигуры разности Минковского. Симплексы могут содержать до трёх точек. Алгоритм использует их, пробуя построить треугольник вокруг точки начала координат, чтобы определить возникновение коллизии.
* Построение симплекса на наиболее удаоённых друг от друга точек позволяет обнаружить коллизию раньше, чем будет построена полная разность Минковского, что существенно ускоряет работу.

### Код решения:
[gjk.py](https://github.com/Dziodzi/polygon-collision-checking/blob/main/gjk.py)

### Результат работы:
![image](https://github.com/Dziodzi/polygon-collision-checking/assets/79766495/419d8006-03eb-48b3-b1b7-78594e04e4a5)

---

## Вывод:

* GJK работает в 308 раз быстрее, чем перебор всех рёбер полигонов с проверкой их пересекаемости, который работает за ```O(n + k)```. Такая скорость достигается засчёт оптимизации вспомогательной функции и симплексами, так полной разности Минковского, которая без оптимизации также высчитывается за ```O(n + k)```, где ```n``` и ```k``` - количество вершин в первом и втором полигонах.
